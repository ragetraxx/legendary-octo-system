name: Deploy RTMP Streamer

on:
  push:
    branches:
      - main
  workflow_dispatch: # Allow manual triggers

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Install FFmpeg
        run: sudo apt update && sudo apt install -y ffmpeg

      - name: Start Streaming
        run: |
          ffmpeg -re -i https://stream.zeno.fm/q1n2wyfs7x8uv \
          -loop 1 -i background.png -vf scale=1280:720 \
          -c:v libx264 -tune stillimage -b:v 1500k -pix_fmt yuv420p \
          -c:a aac -b:a 128k -ar 44100 \
          -f flv rtmp://ssh101.bozztv.com:1935/ssh101/ragemusicph
